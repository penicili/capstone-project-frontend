{"openapi":"3.1.0","info":{"title":"Capstone KPI & ML API","description":"Backend API for KPI dashboard and ML predictions","version":"1.0.0"},"paths":{"/api/predict/final-result":{"post":{"tags":["predictions"],"summary":"Predict Final Result","description":"Predict final result mahasiswa\n\n- **gender**: F atau M\n- **age_band**: 0-35, 35-55, atau 55<=\n- **studied_credits**: Jumlah kredit yang diambil\n- **num_of_prev_attempts**: Jumlah percobaan sebelumnya\n- **total_clicks**: Total clicks di VLE\n- **avg_assessment_score**: Rata-rata nilai assessment (0-100)","operationId":"predict_final_result_api_predict_final_result_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FinalResultRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PredictionResponse"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/schemas__responses__predict_responses__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/predict/dropout":{"post":{"tags":["predictions"],"summary":"Predict Dropout","description":"Predict apakah mahasiswa akan dropout\n\n- **code_module**: Kode modul (AAA-GGG)\n- **code_presentation**: Kode presentasi (2013B, 2013J, 2014B, 2014J)\n- **gender**: F atau M\n- **region**: Region mahasiswa\n- **highest_education**: Pendidikan tertinggi\n- **imd_band**: IMD band\n- **age_band**: 0-35, 35-55, atau 55<=\n- **num_of_prev_attempts**: Jumlah percobaan sebelumnya\n- **studied_credits**: Jumlah kredit yang diambil\n- **disability**: N atau Y","operationId":"predict_dropout_api_predict_dropout_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DropoutRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PredictionResponse"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/schemas__responses__predict_responses__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/models/status":{"get":{"tags":["predictions"],"summary":"Get Models Status","description":"Get status dari loaded models","operationId":"get_models_status_api_models_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModelStatusResponse"}}}}}}},"/api/kpi/metrics":{"get":{"tags":["kpi"],"summary":"Get All Kpi Metrics","description":"Get all KPI metrics in one endpoint\n\nReturns list of 12 KPIs grouped by category:\n- engagement: Login Frequency, Active Learning Time, Material Access Rate, Course Engagement Score, Attendance Consistency\n- academic: Task Completion Ratio, Assignment Timeliness, Quiz Participation Rate, Grade Performance Index\n- risk: Low Activity Alert Index, Predicted Dropout Risk\n\nFrontend can iterate through the list with foreach and group by category","operationId":"get_all_kpi_metrics_api_kpi_metrics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KPIListResponse"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__kpi_router__ErrorResponse"}}}}}}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health","operationId":"health_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"DropoutRequest":{"properties":{"gender":{"type":"string","pattern":"^(F|M)$","title":"Gender","description":"Gender mahasiswa (F/M)"},"age_band":{"type":"string","pattern":"^(0-35|35-55|55<=)$","title":"Age Band","description":"Kelompok umur"},"studied_credits":{"type":"integer","minimum":0.0,"title":"Studied Credits","description":"Jumlah kredit yang diambil"},"num_of_prev_attempts":{"type":"integer","minimum":0.0,"title":"Num Of Prev Attempts","description":"Jumlah percobaan sebelumnya"},"total_clicks":{"type":"integer","minimum":0.0,"title":"Total Clicks","description":"Total clicks di VLE"},"avg_assessment_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Avg Assessment Score","description":"Rata-rata nilai assessment"}},"type":"object","required":["gender","age_band","studied_credits","num_of_prev_attempts","total_clicks","avg_assessment_score"],"title":"DropoutRequest","description":"Request body untuk dropout prediction (uses same 6 features as final_result)","example":{"age_band":"0-35","avg_assessment_score":65.0,"gender":"F","num_of_prev_attempts":0,"studied_credits":60,"total_clicks":1200}},"FinalResultRequest":{"properties":{"gender":{"type":"string","pattern":"^(F|M)$","title":"Gender","description":"Gender mahasiswa (F/M)"},"age_band":{"type":"string","pattern":"^(0-35|35-55|55<=)$","title":"Age Band","description":"Kelompok umur"},"studied_credits":{"type":"integer","minimum":0.0,"title":"Studied Credits","description":"Jumlah kredit yang diambil"},"num_of_prev_attempts":{"type":"integer","minimum":0.0,"title":"Num Of Prev Attempts","description":"Jumlah percobaan sebelumnya"},"total_clicks":{"type":"integer","minimum":0.0,"title":"Total Clicks","description":"Total clicks di VLE"},"avg_assessment_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Avg Assessment Score","description":"Rata-rata nilai assessment"}},"type":"object","required":["gender","age_band","studied_credits","num_of_prev_attempts","total_clicks","avg_assessment_score"],"title":"FinalResultRequest","description":"Request body untuk final result prediction","example":{"age_band":"35-55","avg_assessment_score":75.5,"gender":"M","num_of_prev_attempts":0,"studied_credits":120,"total_clicks":1500}},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"KPIListResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Status keberhasilan"},"data":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Data","description":"List of all KPI metrics"},"total_kpis":{"type":"integer","title":"Total Kpis","description":"Total jumlah KPI"}},"type":"object","required":["success","data","total_kpis"],"title":"KPIListResponse","description":"Response untuk list semua KPI","example":{"data":[{"category":"engagement","definition":"Jumlah login dalam periode tertentu","kpi_id":1,"name":"Login Frequency","unit":"logins","value":1500}],"success":true,"total_kpis":12}},"ModelStatusResponse":{"properties":{"models_ready":{"type":"boolean","title":"Models Ready","description":"Apakah semua model sudah ready"},"dropout_model_loaded":{"type":"boolean","title":"Dropout Model Loaded","description":"Status dropout model"},"final_grade_model_loaded":{"type":"boolean","title":"Final Grade Model Loaded","description":"Status final grade model"},"dropout_encoder_loaded":{"type":"boolean","title":"Dropout Encoder Loaded","description":"Status dropout label encoder"},"finalgrade_encoder_loaded":{"type":"boolean","title":"Finalgrade Encoder Loaded","description":"Status final grade label encoder"}},"type":"object","required":["models_ready","dropout_model_loaded","final_grade_model_loaded","dropout_encoder_loaded","finalgrade_encoder_loaded"],"title":"ModelStatusResponse","description":"Response untuk model status","example":{"dropout_encoder_loaded":true,"dropout_model_loaded":true,"final_grade_model_loaded":true,"finalgrade_encoder_loaded":true,"models_ready":true}},"PredictionResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Status keberhasilan prediksi"},"prediction":{"title":"Prediction","description":"Hasil prediksi"},"message":{"type":"string","title":"Message","description":"Pesan tambahan","default":""}},"type":"object","required":["success","prediction"],"title":"PredictionResponse","description":"Response untuk prediction","example":{"message":"Prediction completed successfully","prediction":"Pass","success":true}},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"api__kpi_router__ErrorResponse":{"properties":{"success":{"type":"boolean","title":"Success","default":false},"error":{"type":"string","title":"Error","description":"Pesan error"}},"type":"object","required":["error"],"title":"ErrorResponse","description":"Response untuk error"},"schemas__responses__predict_responses__ErrorResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Status keberhasilan (selalu false untuk error)","default":false},"error":{"type":"string","title":"Error","description":"Pesan error"},"detail":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Detail","description":"Detail error tambahan"}},"type":"object","required":["error"],"title":"ErrorResponse","description":"Response untuk error","example":{"detail":"Please ensure all models are loaded before making predictions","error":"Model not loaded","success":false}}}}}